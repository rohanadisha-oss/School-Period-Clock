<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Integrated 3D Period Clock</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">

<style>

body{
margin:0;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:linear-gradient(145deg,#0f2027,#203a43,#2c5364);
font-family:'Orbitron',sans-serif;
transition:0.4s;
}

/* Flash Effect */
.flash{
animation:flash 0.5s ease-in-out 6;
}
@keyframes flash{
0%{background:#300000;}
50%{background:#ff0000;}
100%{background:#300000;}
}

/* Main 3D Box */
.main{
width:95%;
max-width:700px;
height:250px;
border-radius:25px;
background:linear-gradient(145deg,#1b2a38,#0c1117);
box-shadow:0 20px 40px rgba(0,0,0,0.8);
display:flex;
justify-content:space-between;
align-items:center;
padding:25px;
color:white;
}

/* Countdown Screen */
.screen{
width:45%;
background:black;
border-radius:15px;
display:flex;
justify-content:center;
align-items:center;
font-size:40px;
color:#ff0000;
box-shadow:inset 0 0 30px red;
letter-spacing:3px;
}

/* Period Number */
.period-box{
width:45%;
display:flex;
justify-content:center;
align-items:center;
position:relative;
}

.period-number{
font-size:130px;
color:#ff1e1e;
text-shadow:0 0 30px red;
}

.bell{
position:absolute;
top:-50px;
font-size:45px;
opacity:0;
}

.bell.active{
opacity:1;
animation:ring 0.6s ease-in-out 5;
}

@keyframes ring{
0%{transform:rotate(0deg);}
25%{transform:rotate(20deg);}
50%{transform:rotate(-20deg);}
75%{transform:rotate(15deg);}
100%{transform:rotate(0deg);}
}

/* Mobile Responsive */
@media(max-width:600px){
.main{
flex-direction:column;
height:auto;
gap:20px;
}
.screen,.period-box{
width:100%;
}
.period-number{
font-size:100px;
}
}

</style>
</head>

<body>

<div class="main">

<div class="screen" id="display">--:--:--</div>

<div class="period-box">
<div class="bell" id="bell"></div>
<div class="period-number" id="periodNumber"></div>
</div>

</div>

<audio id="bellSound">
<source src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg">
</audio>

<script>

let lastPeriod="";

function convertToSeconds(timeStr){
let [time, modifier] = timeStr.split(/(AM|PM)/);
let [hours, minutes] = time.split(":").map(Number);

if(modifier==="PM" && hours!==12) hours+=12;
if(modifier==="AM" && hours===12) hours=0;

return (hours*60+minutes)*60;
}

/* Normal Schedule */
const normal=[
{n:1,start:"10:50AM",end:"11:30AM"},
{n:2,start:"11:30AM",end:"12:10PM"},
{n:3,start:"12:10PM",end:"12:50PM"},
{n:4,start:"12:50PM",end:"1:30PM"},
{n:"BREAK",start:"1:30PM",end:"2:10PM"},
{n:5,start:"2:10PM",end:"2:45PM"},
{n:6,start:"2:45PM",end:"3:20PM"},
{n:7,start:"3:20PM",end:"3:55PM"},
{n:8,start:"3:55PM",end:"4:30PM"},
];

/* Friday */
const friday=[
{n:1,start:"10:50AM",end:"11:30AM"},
{n:2,start:"11:30AM",end:"12:10PM"},
{n:"BREAK",start:"12:10PM",end:"1:10PM"},
{n:3,start:"1:10PM",end:"1:45PM"},
{n:4,start:"1:45PM",end:"2:20PM"},
{n:5,start:"2:20PM",end:"2:55PM"},
{n:6,start:"2:55PM",end:"3:30PM"},
{n:7,start:"3:30PM",end:"4:00PM"},
{n:8,start:"4:00PM",end:"4:30PM"},
];

function update(){

let now=new Date();
let day=now.getDay();
let currentSeconds=now.getHours()*3600+now.getMinutes()*60+now.getSeconds();

/* Sunday */
if(day===0){
document.getElementById("display").innerText="SUNDAY";
document.getElementById("periodNumber").innerText="";
return;
}

let schedule=(day===5)?friday:normal;
let found=false;

for(let item of schedule){

let start=convertToSeconds(item.start);
let end=convertToSeconds(item.end);

if(currentSeconds>=start && currentSeconds<end){

if(lastPeriod!==item.n){
document.getElementById("bellSound").play();
document.body.classList.add("flash");
document.getElementById("bell").classList.add("active");

setTimeout(()=>{
document.body.classList.remove("flash");
document.getElementById("bell").classList.remove("active");
},3000);

lastPeriod=item.n;
}

/* Countdown */
let remain=end-currentSeconds;
let min=Math.floor(remain/60);
let sec=remain%60;

if(min<10) min="0"+min;
if(sec<10) sec="0"+sec;

document.getElementById("display").innerText=min+":"+sec;

if(item.n==="BREAK"){
document.getElementById("periodNumber").innerText="B";
}else{
document.getElementById("periodNumber").innerText=item.n;
}

found=true;
break;
}
}

/* If no active period â†’ Normal Clock */
if(!found){

let h=now.getHours();
let m=now.getMinutes();
let s=now.getSeconds();

if(h<10) h="0"+h;
if(m<10) m="0"+m;
if(s<10) s="0"+s;

document.getElementById("display").innerText=h+":"+m+":"+s;
document.getElementById("periodNumber").innerText="";
}

}

setInterval(update,1000);
update();

</script>

</body>
</html>